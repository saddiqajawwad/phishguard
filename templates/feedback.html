{% extends "base.html" %}
{% block content %}

<div class="page-head">
  <h2>Instant Feedback</h2>
  <div class="progress">
    <div class="progress-bar" style="width: {{ ((current_index) / total_questions) * 100 }}%;"></div>
  </div>
</div>

<div class="card feedback-card">
  {% if feedback.correct %}
    <div class="status good">✅ Correct</div>
  {% else %}
    <div class="status bad">❌ Incorrect</div>
  {% endif %}

  <div class="scenario-preview">
    <div class="chip">{{ feedback.question_type }}</div>
    <div class="scenario-text">{{ feedback.scenario }}</div>
    <div class="extra-box">{{ feedback.extra }}</div>
  </div>

  <div class="explain">
    <h3>Why?</h3>
    <p>{{ feedback.explanation }}</p>
  </div>

  <div class="flags">
    <h3>Red Flags</h3>
    <ul>
      {% for flag in feedback.red_flags %}
        <li>{{ flag }}</li>
      {% endfor %}
    </ul>
  </div>

  <div class="hero-actions">
    {% if current_index >= total_questions %}
      <a class="btn primary" href="{{ url_for('result') }}">View Final Result</a>
    {% else %}
      <a class="btn primary" href="{{ url_for('quiz') }}">Next Scenario →</a>
    {% endif %}
  </div>
</div>

{% endblock %}

